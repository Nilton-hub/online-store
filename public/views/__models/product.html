<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../assets/icons/fontawesome-free-5.15.4-web/css/all.css">
    <link rel="stylesheet" href="../assets/styles/style.css">
    <link rel="stylesheet" href="../assets/styles/media-queries.css">
    <link rel="stylesheet" href="../assets/styles/product.css">
    <title>Loja de Produtos Online</title>
</head>
<body>
<header class="main-header">
    <form action="" class="form-search">
        <input type="search" name="" placeholder="pesquisar" id="">
        <button><i class="fas fa-search"></i></button>
    </form>
    <h1>Criar Conta</h1>
    <nav class="nav">
        <button class="btn-menu" aria-expanded="false" aria-controls="main-menu" aria-label="Abrir menu" aria-haspopup="true"><span id="menu-hamburger"></span></button>
        <ul id="main-menu" role="menu">
            <li>
                <a href="#">Publicar Produto</a>
                <div class="underline-hover"></div>
            </li>
            <li>
                <a href="#">Entrar <i class="fas fa-sign-in-alt"></i></a>
                <div class="underline-hover"></div>
            </li>
        </ul>
    </nav>
</header>

<main>
    <div class="product">
        <div>
            <div class="options">
            <div id="pdt-options" class="pdt-options"><i class="fas fa-ellipsis-v pdt-options"></i></div>
            <ul class="none">
                <li class="pdt-options"><i class="fas fa-edit"></i> Editar</li>
                <li class="pdt-options"><i class="fas fa-trash"></i> Deletar</li>
            </ul>
        </div>
        <h3 class="product__title">Product Name</h3>
    </div>
    <div class="product__cover"
    style="position: relative;">
        <form action="">
            <img src="../assets/images/retrato.jpg" alt="">
            <label for="cover" 
            style="position: absolute; bottom: 5px; right: 5px; background: rgba(112, 110, 110, .6); padding: 10px; border-radius: 3px; color: white; cursor: pointer;">
                <i class="fas fa-camera"></i>
            </label>
            <input type="file" id="cover" style="display: none;">
        </form>
    </div>  
    <div class="product__details">
        <h3>Product Name</h3>
        <span class="product__price">R$ 00,00</span>
        <p>
            Lorem ipsum dolor sit, amet consectetur adipisicing elit. Odit qui mollitia perferendis, accusantium culpa labore. 
            Fugiat reiciendis vero libero nobis.
        </p>
        <div class="product_owner">
            <div><strong><u>Owner Name</u></strong></div>
            <div>Owner Phone</div>
        </div>
    </div>
</div>

<!-- MODAL -->
<div class="none" id="modal">
    <div class="icon" onclick="closeModal()"><i class="far fa-times-circle"></i></div>
    <form class="form none modal" method="post" action="javascript:void(0)">
        <div>
            <input type="text" name="name" id="input-name">
            <label for="input-name">Produto:</label>
            <i class="errorIcon"></i>
        </div>
        <div class="textarea">
            <textarea name="desc" id="text-desc"></textarea>
            <label for="text-desc">Descrição:</label>
            <i class="errorIcon"></i>
        </div>
        <p id="photo-name"></p>
        <div class="file">
            <label for="input-cover">Foto do seu produto: <i class="fas fa-camera"></i></label>
            <input type="file" name="cover" id="input-cover">
            <i class="errorIcon"></i>
        </div>
        <div class="category" id="category">
            <label for="category">Categoria</label>
            <select name="category" id="category">
                <option value="0" selected disabled>-- Selecione:</option>
                <option value="1">Eletrônicos</option>
                <option value="2">Brinquedos</option>
                <option value="3">Roupas</option>
                <option value="4">Eletrodomesticos</option>
                <option value="5">Roupas</option>
                <option value="6">Calçados</option>
                <option value="7">Outra</option>
            </select>
            <i class="errorIcon"></i>
        </div>
        <div class="flex">
            <input type="submit" value="Salvar">
            <input type="reset" value="Limpar os Campos">
        </div>
    </form>
    
    <div class="confirm none modal" style="display: none;" >
        <p>
            Tem certeza que deseja exclir permanentemente esta publicação?<br>
            A ação não podera ser desfeita.
        </p>
        <div>
            <button>Deletar</button> <button onclick="closeModal()">Manter</button>
        </div>
    </div>
</div>
<!-- END MODAL -->
</main>

<footer class="main-footer">
    <div class="footer-content">
        <p class="copy">&copy; 2020-2021 - Criado e Editado por Nilton Duarte</p>
        <ul class="contact-list">
            <li><a href="https://www.facebook.com/nilton.duartte100/" alt="" title="" target="_blank">
                <i class="fab fa-facebook" style="font-size: 1.5em; display: block; text-align: center; margin: auto;"></i>
                <p>Página do Facebook</p>
            </a></li>
            <li><a href="https://instagram.com/n.i.l.t.o.n.1" alt="" title="" target="_blank">
                <i class="fab fa-instagram-square" style="font-size: 1.5em; display: block; text-align: center; margin: auto;"></i>
                <p>@n.i.l.t.o.n.1</p>
            </a></li>
            <li><a href="mailto:tvirapegubeco@gmail.com" alt="" title="" target="_blank">
                <i class="fas fa-envelope-square" style="font-size: 1.5em; display: block; text-align: center; margin: auto;"></i>
                <p>tvirapegubeco@gmail.com</p>
            </a></li>
            <li><a href="https://wa.me/5586999878575" alt="" title="" target="_blank">
                <i class="fab fa-whatsapp-square" style="font-size: 1.5em; display: block; text-align: center; margin: auto;"></i>
                <p>(86) 9 99878575</p>
            </a></li>
        </ul>
    </div>
</footer>
<script src="../assets/icons/fontawesome-free-5.15.4-web/js/all.js"></script>
<script src="../assets/scripts/script.js"></script>
<script>
    const opt = document.querySelector('.options');
    const optList = document.querySelector('.options ul');
    const modalContainer = document.querySelector('#modal');
    const form = document.querySelector('.modal.form');
    const confirm = document.querySelector('.modal.confirm');

    const toggleOptions = evt => {
        optList.classList.toggle('none');
    }
    opt.addEventListener('click', toggleOptions, true);

    const windowClich = evt => {
        if (!evt.target.classList.contains('pdt-options')) {
            if (!optList.classList.contains('none') && !(['svg', 'path'].indexOf(evt.target.tagName) != -1)) {
                optList.classList.add('none');
            }
        }
    }
    window.addEventListener('click', windowClich);
    const editItems = document.querySelectorAll('li.pdt-options');

    const editPost = evt => {
        modalContainer.classList.add('modal-background');
        modalContainer.classList.remove('none');
        modalContainer.classList.remove('none');
        form.classList.remove('none');
    }
    editItems[0].addEventListener('click', editPost);

    const deletePost = evt => {
        modalContainer.classList.add('modal-background');
        modalContainer.classList.remove('none');
        confirm.style.display = 'block'
    }
    editItems[1].addEventListener('click', deletePost);

    function closeModal() {
        modalContainer.classList.remove('modal-background');
        modalContainer.classList.add('none');
        if (!form.classList.contains('none')) {
            form.classList.add('none');
        }
        confirm.style.display = 'none'
    }

    /* ----------------------------- FORM ------------------------------------ */
    inputList.forEach((value, index) => {
    let id = value.getAttribute('id');
    let label = document.querySelector(`[for=${id}]`);
    value.addEventListener('focus', evt => {
        label.classList.add('labelIn');
        label.classList.remove('labelOut');
        value.setAttribute('placeholder', `Digite...`);

        switch (evt.target.id) {
            case 'input-name':
                value.setAttribute('placeholder', `Nome do seu produto`);
                break;
            case 'text-desc':
                value.setAttribute('placeholder', `Detalhe o seu produto para as pessoas`);
                break;
            case 'input-fone':
                value.setAttribute('placeholder', `(00) 9 0000-0000`);
                break;
            case 'input-password':
                value.setAttribute('placeholder', `Crie uma senha`);
            break;
            case 'input-password_re':
                value.setAttribute('placeholder', `Confirme a senha`);
            break;
        default:
            console.log(evt.target.id);
        }
    });

    value.addEventListener('blur', evt => {
        value.setAttribute('placeholder', ``)

        if (value.value.length === 0) {
            label.classList.remove('labelIn');
            label.classList.add('labelOut');
        } else value.style.outline = 'none';
    });

    const inputImage = evt => {
        evt.stopPropagation();
        document.querySelector('p#photo-name').innerHTML = `<b>Foto:</b> <span class="photo-name">${evt.target.files[0].name}</span>`;
    }

    const inputFile = document.querySelector('#input-cover');
    inputFile.addEventListener('change', inputImage);    
});
</script>
</body>
</html>
